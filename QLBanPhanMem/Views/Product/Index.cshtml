@model IEnumerable<QLBanPhanMem.Models.PhanMemModel>
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="row" style="display:flex">
    <div class="col-2">
    
    <select class="form-select" aria-label="Default select example" id="manph" style="width:130px" name="manph" asp-items="@ViewBag.PublisherList" onchange="navigateToPublisher()">
        <option value="">Nhà phát hành</option>
    </select>
    </div>
    <div class="col-2">
        
        <select class="form-select" aria-label="Default select example" id="manph" style="width:130px" name="manph" asp-items="@ViewBag.LoaiPMList" onchange="navigateToPublisher()">
            <option value="">Thể loại</option>
        </select>
    </div>
    <div class="col-6">
        
        <form style="display:flex">
            <div class="input-group mb-3" style="width:150px;margin-left:20px">
                
                <input type="text" class="form-control" placeholder="Giá từ" aria-label="Username" aria-describedby="basic-addon1">
            </div>
            <div class="input-group mb-3" style="width:150px;margin-left:20px">
                
                <input type="text" class="form-control" placeholder="Đến" aria-label="Username" aria-describedby="basic-addon1">
            </div>
            <button style="height:30px" type="submit" class="btn btn-primary">Submit</button>
        </form>
        
    </div>
    <div class="col-2">
        
        
        <select style="width:130px" class="form-select" id="SortDrop" onclick="navigateSort()">
            <option value="">Sắp xếp</option>
            <option value="1">Giá tăng dần</option>
            <option value="2">Giá giảm dần</option>
            <option value="3">Tên A-Z</option>
            <option value="4">Tên Z-A</option>
            <option value="6">Cũ nhất</option>
            <option value="5">Mới nhất</option>
        </select>
        
    
    </div>

</div>
<script>
    function navigateSort() {
        $('#SortDrop').change(() => {
            const value = $('#SortDrop').val();
            window.location.href = "/Product/Index?SortColumn=" + value
        });
    }
    
</script>

<script>
    function navigateToPublisher() {
        var selectedPublisher = document.getElementById("manph");
        var selectedPublisherName = selectedPublisher.options[selectedPublisher.selectedIndex].text;
        if (selectedPublisher) {
            window.location.href = '/Product/Index?search=' + selectedPublisherName;
        } else {
            window.location.href = '/Product/Index'; // Nếu không có lựa chọn, điều hướng đến trang tất cả
        }
    }
</script>
<h1>Tìm kiếm sản phẩm</h1>

@* <p>
    <a asp-action="Create">Create New</a>
</p> *@
<table class="table">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.TENPM)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.MOTA)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.NGAYPHATHANH)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.THOIHAN)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.DONVITHOIHAN)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.DONGIA)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.SOLUONG)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.HINHANH)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.NhaPhatHanh)
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
@foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.TENPM)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.MOTA)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.NGAYPHATHANH)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.THOIHAN)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.DONVITHOIHAN)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.DONGIA)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.SOLUONG)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.HINHANH)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.NhaPhatHanh.TENNPH)
            </td>
            <td>
                @* <a asp-action="Edit" asp-route-id="@item.MAPM">Edit</a> | *@
                <a asp-action="Details" asp-route-id="@item.MAPM">Details</a> 
                @* <a asp-action="Delete" asp-route-id="@item.MAPM">Delete</a> *@
            </td>
        </tr>
}
    </tbody>
</table>
