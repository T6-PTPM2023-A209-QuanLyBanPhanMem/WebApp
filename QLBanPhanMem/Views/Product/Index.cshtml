@model IEnumerable<QLBanPhanMem.Models.PhanMemModel>
@{
    ViewData["Title"] = "Tất cả sản phẩm";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="~/css/productIndex.css" rel="stylesheet" />
<br/>
<div class="filter-container">
    <div>
        <select class="form-select" aria-label="Default select example" id="manph" style="width:130px" name="manph" asp-items="@ViewBag.PublisherList" onchange="navigateToPublisher">
            <option value="">Nhà phát hành</option>
        </select>
    </div>

    <div>
        <select class="form-select" aria-label="Default select example" id="manph" style="width:130px" name="manph" asp-items="@ViewBag.LoaiPMList" onchange="navigateToPublisher">
            <option value="">Thể loại</option>
        </select>
    </div>

    <div>
        <form style="display: flex;">
            <div class="input-group mb-3" style="width:150px; margin-left:20px;">
                <input type="number" id="min" name="min" class="form-control" placeholder="Giá từ" aria-label="Username" aria-describedby="basic-addon1">
            </div>
            <div class="input-group mb-3" style="width:150px; margin-left:20px;">
                <input type="number" id="max" name="max" class="form-control" placeholder="Đến" aria-label="Username" aria-describedby="basic-addon1">
            </div>
            <div class="input-group mb-3" style="width:150px; margin-left:20px;">
                <button style="height:30px" type="submit" class="btn btn-primary">Lọc</button>
            </div>
            
        </form>
    </div>

    <div>
        <select style="width:130px" class="form-select" id="SortDrop" onclick="navigateSort">
            <option value="">Sắp xếp</option>
            <option value="1">Giá tăng dần</option>
            <option value="2">Giá giảm dần</option>
            <option value="3">Tên A-Z</option>
            <option value="4">Tên Z-A</option>
            <option value="6">Cũ nhất</option>
            <option value="5">Mới nhất</option>
        </select>
    </div>
</div>



<script>
    function navigateSort() {
        $('#SortDrop').change(() => {
            const value = $('#SortDrop').val();
            window.location.href = "/Product/Index?SortColumn=" + value
        });
    }

</script>

<script>
    function navigateToPublisher() {
        var selectedPublisher = document.getElementById("manph");
        var selectedPublisherName = selectedPublisher.options[selectedPublisher.selectedIndex].text;
        if (selectedPublisher) {
            window.location.href = '/Product/Index?search=' + selectedPublisherName;
        } else {
            window.location.href = '/Product/Index'; // Nếu không có lựa chọn, điều hướng đến trang tất cả
        }
    }
</script>
<h1>Duyệt qua danh mục sản phẩm</h1>

@* <p>
    <a asp-action="Create">Create New</a>
</p> *@
<div class="card-container">
    @foreach (var item in Model)
    {
        <div class="card" onclick="navigateToLink('/Product/Details/@Html.DisplayFor(modelItem => item.MAPM)')">
            <img src="~/image/demo.jpg" class="card-img-top" alt="...">
            <div class="card-body">               
                <p class="card-text">@Html.DisplayFor(modelItem => item.TENPM)</p>
                <p class="card-text"><b>@Html.DisplayFor(modelItem => item.DONGIA) ₫</b></p>
            </div>
        </div>
    }
    <script>
        function navigateToLink(link) {
            window.location.href = link;
        }
    </script>
</div>
<div class="pagination-container">
    <nav aria-label="">
        <ul class="pagination">
            <li class="page-item">
                <a class="page-link" href="/Product/Index?page=1">Đầu</a>
            </li>


            @for (int i = 0; i < ViewBag.TotalPage; i++)
            {
                <li class="page-item"><a class="page-link" href="/Product/Index?page=@(i+1)">@(i + 1)</a></li>

            }

            <li class="page-item">
                <a class="page-link" href="/Product/Index?page=@ViewBag.End">Cuối</a>
            </li>
        </ul>
    </nav>
</div>

